:target{#basic-http-proxy}

# Basic HTTP Proxy

<Outline domain="py" objectType="class" target={"werkzeug.middleware.http_proxy.ProxyMiddleware"} module={"werkzeug.middleware.http_proxy"} fullname={"ProxyMiddleware"} parameters={["app", "targets", "chunk_size", "timeout"]} description={"Proxy requests under a path to an external server, routing other\nrequests to the app."}>
  <Outline.Signature fullname="ProxyMiddleware" id="werkzeug.middleware.http_proxy.ProxyMiddleware">
    <Outline.Keyword>class<span>{" "}</span></Outline.Keyword><Outline.Prefix>werkzeug.middleware.http\_proxy.</Outline.Prefix><Outline.Name>ProxyMiddleware</Outline.Name><Outline.ParameterList><span>(</span><Outline.Parameter><span className="name">app</span></Outline.Parameter>, <Outline.Parameter><span className="name">targets</span></Outline.Parameter>, <Outline.Parameter><span className="name">chunk\_size</span><span>=</span><span>16384</span></Outline.Parameter>, <Outline.Parameter><span className="name">timeout</span><span>=</span><span>10</span></Outline.Parameter><span>)</span></Outline.ParameterList>
  </Outline.Signature>

  <Outline.Content>
    Proxy requests under a path to an external server, routing other
    requests to the app.

    This middleware can only proxy HTTP requests, as HTTP is the only
    protocol handled by the WSGI server. Other protocols, such as
    WebSocket requests, cannot be proxied at this layer. This should
    only be used for development, in production a real proxy server
    should be used.

    The middleware takes a dict mapping a path prefix to a dict
    describing the host to be proxied to:

    ```default
    app = ProxyMiddleware(app, {
        "/static/": {
            "target": "http://127.0.0.1:5001/",
        }
    })
    ```

    Each host has the following options:

    <DefinitionList>
      <dl>
        <dt>
          <DefinitionList.Term><span>`target`:</span></DefinitionList.Term>
        </dt>

        <dd>
          The target URL to dispatch to. This is required.
        </dd>

        <dt>
          <DefinitionList.Term><span>`remove_prefix`:</span></DefinitionList.Term>
        </dt>

        <dd>
          Whether to remove the prefix from the URL before dispatching it
          to the target. The default is `False`.
        </dd>

        <dt>
          <DefinitionList.Term><span>`host`:</span></DefinitionList.Term>
        </dt>

        <dd>
          <DefinitionList>
            <dl>
              <dt>
                <DefinitionList.Term><span>`"<auto>"` (default):</span></DefinitionList.Term>
              </dt>

              <dd>
                The host header is automatically rewritten to the URL of the
                target.
              </dd>

              <dt>
                <DefinitionList.Term><span>`None`:</span></DefinitionList.Term>
              </dt>

              <dd>
                The host header is unmodified from the client request.
              </dd>

              <dt>
                <DefinitionList.Term><span>Any other value:</span></DefinitionList.Term>
              </dt>

              <dd>
                The host header is overwritten with the value.
              </dd>
            </dl>
          </DefinitionList>
        </dd>

        <dt>
          <DefinitionList.Term><span>`headers`:</span></DefinitionList.Term>
        </dt>

        <dd>
          A dictionary of headers to be sent with the request to the
          target. The default is `{}`.
        </dd>

        <dt>
          <DefinitionList.Term><span>`ssl_context`:</span></DefinitionList.Term>
        </dt>

        <dd>
          A [`ssl.SSLContext`](https://docs.python.org/3/library/ssl.html#ssl.SSLContext "(in Python v3.11)") defining how to verify requests if the
          target is HTTPS. The default is `None`.
        </dd>
      </dl>
    </DefinitionList>

    In the example above, everything under `"/static/"` is proxied to
    the server on port 5001. The host header is rewritten to the target,
    and the `"/static/"` prefix is removed from the URLs.

    <FieldList>
      <dl>
        <dt className="field-name">
          Parameters
        </dt>

        <dd className="field-body">
          - <Outline.ParameterTarget>app</Outline.ParameterTarget> (<em>WSGIApplication</em>) – The WSGI application to wrap.
          - <Outline.ParameterTarget>targets</Outline.ParameterTarget> (<em>t.Mapping</em><em>\[</em>[<em>str</em>](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.11)")<em>, </em>[<em>dict</em>](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.11)")<em>\[</em>[<em>str</em>](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.11)")<em>, </em><em>t.Any</em><em>]</em><em>]</em>) – Proxy target configurations. See description above.
          - <Outline.ParameterTarget>chunk\_size</Outline.ParameterTarget> ([<em>int</em>](https://docs.python.org/3/library/functions.html#int "(in Python v3.11)")) – Size of chunks to read from input stream and
            write to target.
          - <Outline.ParameterTarget>timeout</Outline.ParameterTarget> ([<em>int</em>](https://docs.python.org/3/library/functions.html#int "(in Python v3.11)")) – Seconds before an operation to a target fails.
        </dd>
      </dl>
    </FieldList>

    <Container type="info" title="Version added">
      <span>New in version 0.14.</span>
    </Container>
  </Outline.Content>
</Outline>

<FieldList>
  <dl>
    <dt className="field-name">
      copyright
    </dt>

    <dd className="field-body">
      2007 Pallets
    </dd>

    <dt className="field-name">
      license
    </dt>

    <dd className="field-body">
      BSD-3-Clause
    </dd>
  </dl>
</FieldList>
